{% extends "dash/base.html" %}

{% block title %}Ticket {{ticket.type}}{{ticket.pk}} {% endblock title %}

{% load static %}

{% block main %}
<div class="container m-4"></div>
<h1>Detalle del Ticket #{{ ticket.type }}{{ ticket.pk }}</h1>

<div class="card">
    <div class="card-header">
        <h2>{{ ticket.title }}</h2>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>Tipo:</strong> {{ ticket.get_type_display }}</p>
                <p><strong>Categoría:</strong> {{ ticket.category }}</p>
                <p><strong>Severidad:</strong> {{ ticket.get_severity_display }}</p>
                <p><strong>Impacto:</strong> {{ ticket.get_impact_display }}</p>
                <p><strong>Estado:</strong> {{ ticket.get_status_display }}</p>
            </div>
            <div class="col-md-6">
                <p><strong>Creado por:</strong> {{ ticket.createdBy }}</p>
                <p><strong>Asignado a:</strong> {{ ticket.assignedTo }}</p>
                <p><strong>Fecha de creación:</strong> {{ ticket.createdAt|date:"d/m/Y H:i" }}</p>
                <p><strong>Última actualización:</strong> {{ ticket.lastUpdate|date:"d/m/Y H:i" }}</p>
                <p><strong>Tiempo de resolución:</strong> {{ ticket.resolution_display }}</p>
            </div>
        </div>
        <div class="mt-3">
            <h3>Resumen</h3>
            <p>{{ ticket.resume }}</p>
        </div>
        {% if ticket.report %}
        <div class="mt-3">
            <h3>Reporte</h3>
            <p>{{ ticket.report }}</p>
        </div>
        {% endif %}
    </div>
    <div class="card-footer">
        <a href="#" class="btn btn-warning">Editar</a>
        <a href="{% url 'core:tickets' %}" class="btn btn-secondary">Volver a la lista</a>
    </div>
</div>
</div>
{% endblock main %}